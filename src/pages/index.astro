---
import Layout from '../layouts/Layout.astro';
import Profile from '../components/Profile.astro';
import LinkPreview from '../components/LinkPreview.astro';
import Footer from '../components/Footer.astro';
import { fetchOgData } from '../utils/fetchOgData';

const socials = [
  { url: 'https://twitter.com/lauragift_', icon: 'https://api.iconify.design/line-md:twitter.svg?color=white', label: 'Twitter' },
  { url: 'https://instagram.com/thegiftcode_', icon: 'https://api.iconify.design/line-md:instagram.svg?color=white', label: 'Instagram' },
  { url: 'https://tiktok.com/@thegiftcode_', icon: 'https://api.iconify.design/line-md:tiktok.svg?color=white', label: 'TikTok' },
  { url: 'https://youtube.com/@giftegwuenu', icon: 'https://api.iconify.design/line-md:youtube.svg?color=white', label: 'YouTube' },
  { url: 'https://giftegwuenu.com', icon: 'https://api.iconify.design/mdi:web.svg?color=white', label: 'Website' },
];

// Just drop URLs here — add an optional title to override the auto-fetched one
const urls: { url: string; title?: string }[] = [
  { url: 'https://www.amazon.com/shop/giftegwuenu?ccs_id=673372b8-08b2-4336-93e0-4eecd4a2eb85', title: 'My Favorite Things on Amazon' },
  { url: 'https://lauragift21.notion.site/Inburgering-Exam-Resources-Tips-1c4d7bddd38780deb6d7d0b8238d6bc8?pvs=74', title: 'Inburgering Exam: Resources & Tips' },
];

const links = await Promise.all(
  urls.map(async ({ url, title }) => {
    const og = await fetchOgData(url);
    if (title) og.title = title;
    return og;
  })
);
---

<Layout>
  <main class="min-h-screen relative">
    <div class="max-w-2xl mx-auto px-5 md:px-8">
      <!-- Hero -->
      <Profile
        name="Gift Egwuenu"
        tagline="Lifestyle, Money & Beauty"
        bio="Digital creator living in the Netherlands. I share lifestyle content, personal finance tips, and beauty routines — helping women look good, feel good, and build wealth."
        avatar="/gift.jpg"
        email="hello@thegiftcode.dev"
        socials={socials}
      />

      <!-- Link Previews -->
      <h2 class="font-display text-3xl md:text-4xl font-bold text-warm-900 text-center mb-8 mt-12">Links</h2>
      <div class="grid grid-cols-1 gap-4 max-w-lg mx-auto">
        {links.map((og, index) => (
          <LinkPreview og={og} index={index} />
        ))}
      </div>

      <!-- Footer -->
      <Footer name="Gift Egwuenu" email="hello@thegiftcode.dev" />
    </div>
  </main>
</Layout>
